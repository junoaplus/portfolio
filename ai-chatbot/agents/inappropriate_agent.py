"""
Inappropriate Agent - ë¶€ì ì ˆí•œ ì§ˆë¬¸ ì°¨ë‹¨

ì—­í• :
1. ì±„ìš© ë©´ì ‘ê³¼ ë¬´ê´€í•œ ì§ˆë¬¸ì— ëŒ€í•œ ì•ˆë‚´ ë©”ì‹œì§€ ì œê³µ
2. ìš•ì„¤, ë¹„ì†ì–´, ì˜ë¯¸ì—†ëŠ” í…ìŠ¤íŠ¸ ì°¨ë‹¨
3. ì ì ˆí•œ ì§ˆë¬¸ ì˜ˆì‹œ ì œê³µìœ¼ë¡œ ì‚¬ìš©ìž ê°€ì´ë“œ
"""

from workflow.state import ChatState

class InappropriateAgent:
    """ë¶€ì ì ˆí•œ ì§ˆë¬¸ ì²˜ë¦¬ ì „ë¬¸ ì—ì´ì „íŠ¸"""
    
    def __init__(self):
        self.blocked_messages = [
            "ì£„ì†¡í•©ë‹ˆë‹¤. ì±„ìš© ê´€ë ¨ ì§ˆë¬¸ë§Œ ë‹µë³€ë“œë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",
            "ë©´ì ‘ê³¼ ê´€ë ¨ëœ ì§ˆë¬¸ì„ ë¶€íƒë“œë¦½ë‹ˆë‹¤.",
            "ê¸°ìˆ , í”„ë¡œì íŠ¸, ê²½í—˜ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì„ ë¬¼ì–´ë³´ì„¸ìš”.",
        ]
        
        self.suggested_questions = {
            "ðŸ”§ ê¸°ìˆ  ìŠ¤íƒ ë³´ê¸°": "/skills",
            "ðŸ“¦ í”„ë¡œì íŠ¸ ë³´ê¸°": "/projects", 
            "ðŸ‘¤ ê°œì¸ ì†Œê°œ ë³´ê¸°": "/about"
        }
    
    def process(self, state: ChatState) -> ChatState:
        """ë¶€ì ì ˆí•œ ì§ˆë¬¸ì— ëŒ€í•œ ì•ˆë‚´ ë©”ì‹œì§€ ì œê³µ"""
        
        print(f"\nðŸš« Inappropriate Agent ì‹œìž‘")
        print(f"   ì°¨ë‹¨ëœ ì§ˆë¬¸: {state.question}")
        
        # ì•ˆë‚´ ë©”ì‹œì§€ ì„¤ì •
        state.response = """ì£„ì†¡í•©ë‹ˆë‹¤. ì±„ìš© ê´€ë ¨ ì§ˆë¬¸ë§Œ ë‹µë³€ë“œë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ë‹¤ìŒê³¼ ê°™ì€ ì§ˆë¬¸ì„ í•´ì£¼ì„¸ìš”:
- ê¸°ìˆ  ìŠ¤íƒì´ë‚˜ í”„ë ˆìž„ì›Œí¬ì— ëŒ€í•œ ì§ˆë¬¸
- í”„ë¡œì íŠ¸ ê²½í—˜ê³¼ êµ¬í˜„ ê³¼ì •
- ë¬¸ì œ í•´ê²° ê²½í—˜ê³¼ ì„±ê³¼
- ì§€ì› ë™ê¸°ë‚˜ ê°•ì , ì„±ìž¥ ìŠ¤í† ë¦¬

ê¶ê¸ˆí•œ ì ì´ ìžˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ë¬¼ì–´ë³´ì„¸ìš”! ðŸ˜Š"""
        
        # ì¶”ì²œ ë§í¬ ì œê³µ
        state.recommended_links = self.suggested_questions
        state.response_quality_score = 0.1  # ë‚®ì€ ì ìˆ˜ë¡œ ì„¤ì •
        
        print(f"   âœ… ì°¨ë‹¨ ì™„ë£Œ - ì•ˆë‚´ ë©”ì‹œì§€ ì œê³µ")
        
        return state

def inappropriate_agent(state: ChatState) -> ChatState:
    """Inappropriate Agent ì‹¤í–‰ í•¨ìˆ˜"""
    agent = InappropriateAgent()
    return agent.process(state)